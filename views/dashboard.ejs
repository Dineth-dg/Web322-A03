<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <!-- Tailwind + DaisyUI CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      plugins: [daisyui],
    }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@3.6.1/dist/full.css" rel="stylesheet">
</head>
<body class="bg-base-200 min-h-screen p-6">

  <div class="max-w-3xl mx-auto">

    <!-- Header -->
    <header class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">Hello, <%= user.username %>!</h1>
      <nav class="space-x-2">
        <a href="/tasks/add" class="btn btn-primary">Add Task</a>
        <a href="/logout" class="btn btn-error">Logout</a>
      </nav>
    </header>

    <!-- Info Card -->
    <div class="card w-full bg-info mb-6 shadow-sm">
      <div class="card-body">
        <h2 class="card-title text-white">ADD YOUR TASK</h2>
        <p class="text-white">Add task that you like to add.</p>
      </div>
    </div>

    <!-- Tasks Section -->
    <% if (tasks.length === 0) { %>
      <p class="text-gray-700">You donâ€™t have any tasks yet. Start by adding one!</p>
    <% } else { %>
      <div class="grid gap-4">
        <% tasks.forEach(task => { %>
          <div class="card w-full bg-base-100 shadow-md">
            <div class="card-body">
              <h2 class="card-title"><%= task.title %></h2>
              <p>Status: <span class="<%= task.status === 'Completed' ? 'text-green-600' : 'text-yellow-600' %>"><%= task.status %></span></p>
              
              <!-- Show description if available -->
              <% if (task.description) { %>
                <p class="text-gray-700"><%= task.description %></p>
              <% } %>
              
              <% if (task.dueDate) { %>
                <p>Due: <%= new Date(task.dueDate).toLocaleDateString() %></p>
              <% } %>
              
              <div class="justify-end card-actions mt-2">
                <a href="/tasks/edit/<%= task.id %>" class="btn btn-sm btn-info">Edit</a>
                <form action="/tasks/delete/<%= task.id %>" method="POST" class="inline">
                  <button type="submit" class="btn btn-sm btn-error">Delete</button>
                </form>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>

  </div>

</body>
</html>
